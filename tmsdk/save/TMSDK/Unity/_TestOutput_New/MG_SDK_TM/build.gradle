// GENERATED BY UNITY. REMOVE THIS COMMENT TO PREVENT OVERWRITING WHEN EXPORTING AGAIN

//From : Unity Setup Dir\Unity\2018.4.23f1\Unity\Editor\Data\PlaybackEngines\AndroidPlayer\Tools\GradleTemplates\mainTemplate.gradle
buildscript {
	repositories {
		maven{ url 'http://maven.aliyun.com/nexus/content/groups/public/'}
		maven{ url 'http://maven.aliyun.com/nexus/content/repositories/jcenter'}
		mavenCentral()
		google()
		jcenter()
	}

    dependencies {
        classpath 'com.android.tools.build:gradle:3.4.0'
}
}

allprojects {
   repositories {
   	  maven{ url 'http://maven.aliyun.com/nexus/content/groups/public/'}
	  maven{ url 'http://maven.aliyun.com/nexus/content/repositories/jcenter'}
	  mavenCentral()
	  google()
      jcenter()
	  
      flatDir {
        dirs 'libs'
      }
   }
}

apply plugin: 'com.android.application'


dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation(name: 'TMUnityBase', ext:'aar')
    implementation(name: 'TMUnityBridge', ext:'aar')
    implementation(name: 'TMUnityBridgeService', ext:'aar')
    implementation(name: 'TMUnityCommonLib', ext:'aar')
    implementation(name: 'TMUnityOpenSrc', ext:'aar')
    implementation(name: 'TMUnityPlatformMG', ext:'aar')
    implementation project(':unity-android-resources')


	//need by bridge module
    api 'com.alibaba:arouter-api:1.5.1'
    annotationProcessor 'com.alibaba:arouter-compiler:1.5.1'
    implementation 'com.alibaba:fastjson:1.1.72.android'
    implementation 'com.orhanobut:logger:2.2.0'
}
android {
	compileSdkVersion 29
	buildToolsVersion '30.0.3'
	
	compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

	defaultConfig {
		minSdkVersion 16
		targetSdkVersion 29
		applicationId 'com.tm.sdk.mg'
		
		//need for gradle build
		multiDexEnabled true
		
		ndk {
	            abiFilters 'armeabi-v7a', 'x86'
	        }
	        versionCode 1
        	versionName '0.1'
		
		//need by bridge module
		javaCompileOptions {
            		annotationProcessorOptions {
                	arguments = [AROUTER_MODULE_NAME: project.getName()]
            		}
        	}
	}

    lintOptions {
        abortOnError false
    }

    aaptOptions {
        noCompress = ['.unity3d', '.ress', '.resource', '.obb', 'sdkbridge/sdk_define.json']
    }

    buildTypes {
        debug {
            minifyEnabled false
            useProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-unity.txt'
            jniDebuggable true
        }
        release {
            minifyEnabled false
            useProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-unity.txt'
            signingConfig signingConfigs.debug
        }
    }

    packagingOptions {
        doNotStrip '*/armeabi-v7a/*.so'
        doNotStrip '*/x86/*.so'
    }

    bundle {
        language {
            enableSplit = false
        }
        density {
            enableSplit = false
        }
        abi {
            enableSplit = true
        }
    }
}
